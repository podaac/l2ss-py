

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Subset Module &mdash; l2ss-py 3.2.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=4f6ddb47"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Subset Harmony Module" href="subset_harmony.html" />
    <link rel="prev" title="Reference Guide for l2ss-py" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            l2ss-py
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Subset Module</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#subset-py">subset.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#podaac.subsetter.subset.subset"><code class="docutils literal notranslate"><span class="pre">subset()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#podaac.subsetter.subset.subset_with_bbox"><code class="docutils literal notranslate"><span class="pre">subset_with_bbox()</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="#podaac.subsetter.subset.subset_with_shapefile_multi"><code class="docutils literal notranslate"><span class="pre">subset_with_shapefile_multi()</span></code></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="subset_harmony.html">Subset Harmony Module</a></li>
<li class="toctree-l1"><a class="reference internal" href="run_subsetter.html">Run Subsetter Module</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">l2ss-py</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Subset Module</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/subset.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="module-podaac.subsetter.subset">
<span id="subset-module"></span><h1>Subset Module<a class="headerlink" href="#module-podaac.subsetter.subset" title="Link to this heading"></a></h1>
<section id="subset-py">
<h2>subset.py<a class="headerlink" href="#subset-py" title="Link to this heading"></a></h2>
<p>Functions related to subsetting a NetCDF file.</p>
</section>
<dl class="py function">
<dt class="sig sig-object py" id="podaac.subsetter.subset.subset">
<span class="sig-prename descclassname"><span class="pre">podaac.subsetter.subset.</span></span><span class="sig-name descname"><span class="pre">subset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_to_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_file</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">variables</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">origin_source</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">()</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage_file_name_subsetted_true</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stage_file_name_subsetted_false</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span></span><a class="reference internal" href="_modules/podaac/subsetter/subset.html#subset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#podaac.subsetter.subset.subset" title="Link to this definition"></a></dt>
<dd><p>Subset a given NetCDF file given a bounding box</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>file_to_subset</strong> (<em>string</em>) – The location of the file which will be subset</p></li>
<li><p><strong>bbox</strong> (<em>np.ndarray</em>) – The chosen bounding box. This is a tuple of tuples formatted
as such: ((west, east), (south, north)). The assumption is that
the valid range is ((-180, 180), (-90, 90)). This will be
transformed as appropriate if the actual longitude range is
0-360.</p></li>
<li><p><strong>output_file</strong> (<em>string</em>) – The file path for the output of the subsetting operation.</p></li>
<li><p><strong>variables</strong> (<em>list</em><em>, </em><em>str</em><em>, </em><em>optional</em>) – List of variables to include in the resulting data file.
NOTE: This will remove ALL variables which are not included
in this list, including coordinate variables!</p></li>
<li><p><strong>cut</strong> (<em>boolean</em>) – True if the scanline should be cut, False if the scanline should
not be cut. Defaults to True.</p></li>
<li><p><strong>shapefile</strong> (<em>str</em>) – Name of local shapefile used to subset given file.</p></li>
<li><p><strong>min_time</strong> (<em>str</em>) – ISO timestamp representing the lower bound of the temporal
subset to be performed. If this value is not provided, the
granule will not be subset temporally on the lower bound.</p></li>
<li><p><strong>max_time</strong> (<em>str</em>) – ISO timestamp representing the upper bound of the temporal
subset to be performed. If this value is not provided, the
granule will not be subset temporally on the upper bound.</p></li>
<li><p><strong>origin_source</strong> (<em>str</em>) – Original location or filename of data to be used in “derived from”
history element.</p></li>
<li><p><strong>lat_var_names</strong> (<em>list</em>) – List of variables that represent the latitude coordinate
variables for this granule. This list will only contain more
than one value in the case where there are multiple groups and
different coordinate variables for each group.</p></li>
<li><p><strong>lon_var_names</strong> (<em>list</em>) – List of variables that represent the longitude coordinate
variables for this granule. This list will only contain more
than one value in the case where there are multiple groups and
different coordinate variables for each group.</p></li>
<li><p><strong>time_var_names</strong> (<em>list</em>) – List of variables that represent the time coordinate
variables for this granule. This list will only contain more
than one value in the case where there are multiple groups and
different coordinate variables for each group.</p></li>
<li><p><strong>pixel_subset</strong> (<em>boolean</em>) – Cut the lon lat based on the rows and columns within the bounding box,
but could result with lon lats that are outside the bounding box</p></li>
<li><p><strong>stage_file_name_subsetted_true</strong> (<em>str</em>) – stage file name if subsetting is true name depends on result of subset</p></li>
<li><p><strong>stage_file_name_subsetted_false</strong> (<em>str</em>) – stage file name if subsetting is false name depends on result of subset</p></li>
<li><p><strong>decode_times</strong> (<em># clean up time variable in SNDR before</em>)</p></li>
<li><p><strong>blank</strong> (<em># SNDR.AQUA files have ascending node time</em>)</p></li>
<li><p><strong>list</strong><strong>(</strong><strong>nc_dataset.variables</strong><strong>)</strong><strong>)</strong> (<em>if any</em><em>(</em><em>'__asc_node_tai93' in i for i in</em>) – <p>asc_time_var = nc_dataset.variables[‘__asc_node_tai93’]
if not asc_time_var[:] &gt; 0:</p>
<blockquote>
<div><p>del nc_dataset.variables[‘__asc_node_tai93’]</p>
</div></blockquote>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="podaac.subsetter.subset.subset_with_bbox">
<span class="sig-prename descclassname"><span class="pre">podaac.subsetter.subset.</span></span><span class="sig-name descname"><span class="pre">subset_with_bbox</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">time_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bbox</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">ndarray</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_time</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">ndarray</span></span></span><a class="reference internal" href="_modules/podaac/subsetter/subset.html#subset_with_bbox"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#podaac.subsetter.subset.subset_with_bbox" title="Link to this definition"></a></dt>
<dd><p>Subset an xarray Dataset using a spatial bounding box.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>xr.Dataset</em>) – Dataset to subset</p></li>
<li><p><strong>lat_var_names</strong> (<em>list</em>) – Name of the latitude variables in the given dataset</p></li>
<li><p><strong>lon_var_names</strong> (<em>list</em>) – Name of the longitude variables in the given dataset</p></li>
<li><p><strong>time_var_names</strong> (<em>list</em>) – Name of the time variables in the given dataset</p></li>
<li><p><strong>variables</strong> (<em>list</em><em>[</em><em>str</em><em>]</em>) – List of variables to include in the result</p></li>
<li><p><strong>bbox</strong> (<em>np.array</em>) – Spatial bounding box to subset Dataset with.</p></li>
<li><p><strong>cut</strong> (<em>bool</em>) – True if scanline should be cut.</p></li>
<li><p><strong>min_time</strong> (<em>str</em>) – ISO timestamp of min temporal bound</p></li>
<li><p><strong>max_time</strong> (<em>str</em>) – ISO timestamp of max temporal bound</p></li>
<li><p><strong>pixel_subset</strong> (<em>boolean</em>) – Cut the lon lat based on the rows and columns within the bounding box,
but could result with lon lats that are outside the bounding box</p></li>
<li><p><strong>TODO</strong> (add docstring and type hint for <cite>variables</cite> parameter.)</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><ul class="simple">
<li><p><em>np.array</em> – Spatial bounds of Dataset after subset operation</p></li>
<li><p><em>TODO - fix this docstring type and the type hint to match code (currently returning a list[xr.Dataset])</em></p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="podaac.subsetter.subset.subset_with_shapefile_multi">
<span class="sig-prename descclassname"><span class="pre">podaac.subsetter.subset.</span></span><span class="sig-name descname"><span class="pre">subset_with_shapefile_multi</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lat_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">lon_var_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapefile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cut</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_subset</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Dataset</span></span></span><a class="reference internal" href="_modules/podaac/subsetter/subset.html#subset_with_shapefile_multi"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#podaac.subsetter.subset.subset_with_shapefile_multi" title="Link to this definition"></a></dt>
<dd><p>Subset an xarray Dataset using a shapefile for multiple latitude and longitude variable pairs</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The subsetted dataset</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>xr.Dataset</p>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Reference Guide for l2ss-py" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="subset_harmony.html" class="btn btn-neutral float-right" title="Subset Harmony Module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright .</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>